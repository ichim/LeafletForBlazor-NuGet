const e = () => 71828182845904, Maths = { e: e() }; export const _getArgs = e => e.split("${").filter((e => e.includes("}"))).map((e => e.split("}")[0])); export const _computingFeliciaLanguage = (current, content) => { var stringToComputing = content.replace("'", "`"); for (const e of _getArgs(stringToComputing)) { const isArray = Array.isArray(eval("current." + e)), objReplace = `\${${e}}`; stringToComputing = stringToComputing.replace(objReplace.toString(), void 0 === eval("current." + e) ? e.toString() : isArray ? "[" + eval("current." + e) + "]" : eval("current." + e)) } return stringToComputing }; export const _getItemsParams = e => e.slice(0, e.length - 1).map((e => Array.isArray(e) ? e[e.length - 1] : e)); export const __getHtmlTagItems = (e, t) => { const r = document.createElement("div"); r.innerHTML = e.trim(); const o = null === r.querySelector(t) ? null : r.querySelector(t).getAttribute("options"), n = null === r.querySelector(t) ? null : r.querySelector(t).getAttribute("style"); return { items: (null === r.querySelector(t) ? "" : _remove(r.querySelector(t).outerHTML, t)).split("=").map((e => e.trim().split(" "))), style: n, options: o } }; export const _getItemsValues = e => e.slice(1, e.length).map((e => Array.isArray(e) ? e[0] : e)); export const _tagToJSONParams = (e, t, r, o) => { let n = {}; return e.length === t.length && e.map(((e, r) => { n[e] = t[r] })), n.style = r, n.options = JSON.parse(o), n }; export const _getJSONParametersFromHtmlTag = (e, t) => { const r = __getHtmlTagItems(e, t), o = r.items, n = _getItemsParams(o), l = _getItemsValues(o); return _tagToJSONParams(n, l, r.style, r.options) }; export const _is = (e, t) => { if (void 0 === e) return !1; const r = document.createElement("div"); return r.innerHTML = e.trim(), !!r.querySelector(t) }; const _remove = (e, t) => e.replace(`<${t}`, "").replace(`></${t}>`, "").replace("/>", ""); export const _replaceTagWithDiv = (e, t) => { const r = document.createElement("div"); r.innerHTML = e; const o = _uuidv4(), n = r.querySelectorAll(t), l = []; let a = document.createElement("div"); return n.forEach((e => { for (e.setAttribute("id", o), l.push(e.outerHTML), a = document.createElement("canvas"), a.style.cssText = e.style.cssText, a.id = o; e.firstChild;)a.appendChild(e.firstChild); e.parentNode.replaceChild(a, e) })), { template: r.querySelector("canvas").outerHTML, id: o } }; export const _replaceTagById = (e, t) => { replaceElementById(e, t) }; export const _replaceTagDocumentByTagName = (e, t) => { document.querySelectorAll(e).forEach(((e, r) => { e.parentNode.innerHTML = t })) }; function replaceElementById(e, t) { const r = document.getElementById(e); if (r) { const e = document.createElement("div"); e.innerHTML = t; const o = e.firstChild; void 0 !== r.id && r.parentNode.replaceChild(o, r) } else console.error(`Elementul cu ID-ul "${e}" nu a fost găsit.`) } export const _contentToChart = stringToComputing => { const json = _getJSONParametersFromHtmlTag(stringToComputing, "chart"), htmlConf = _replaceTagWithDiv(stringToComputing, "chart"); _replaceTagById(json.id.replaceAll('"', ""), htmlConf.template); const type = json.type.replaceAll("`", "").replaceAll("'", "").replaceAll('"', ""), data = eval(json.data.replaceAll('"', "")), colorArray = json.render.replaceAll('"', "").replace(/\[(.*?)\]/, "$1").split(",").map((e => e.trim())), labels = json.labels.replace(/\[(.*?)\]/, "$1").split(",").map((e => e.trim())); return new Chart(htmlConf.id, { type: type, data: { labels: labels, datasets: [{ backgroundColor: colorArray, data: data }] }, options: json.options }), htmlConf.template }; const _uuidv4 = () => "10000000-1000-4000-8000-100000000000".replace(/[018]/g, (e => (+e ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> +e / 4).toString(16)));