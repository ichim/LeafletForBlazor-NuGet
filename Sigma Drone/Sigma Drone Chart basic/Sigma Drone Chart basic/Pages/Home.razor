@page "/"

<button onclick="@clearMap">Clear map</button>
<RealTimeMap @ref="rtm" Parameters="@loadParameters" height="calc(100vh - 4rem)" width="calc(100vw - 2rem)" OnAfterMapLoaded="@onAfterMapLoaded" />


@code {
    RealTimeMap rtm;
    RealTimeMap.LoadParameters loadParameters = new RealTimeMap.LoadParameters()
    {
        location = new RealTimeMap.Location()
        {
            latitude = 51.02094731770253,
            longitude = 4.523290395225346,
        },
        zoomLevel = 10
    };
    private async Task onAfterMapLoaded(RealTimeMap.MapEventArgs args)
    {

        await args.sender.Geometric.DisplayChartFromObject.addChartPoint(new RealTimeMap.SigmaDronePoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.02094731770253,
                longitude = 4.523290395225346,
            },
            dimension = 62,
            fontSize = 6,
            heightCrown = 12,
            
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 6,
                maxZoomLevel = 14
            },
            crownIndicators = new List<RealTimeMap.SigmaDroneObject>()
        {
            new RealTimeMap.SigmaDroneCrownPercent()
            {
                label = "battery",
                valueStart = 0,
                valueStop = 4,
                value = 2.4,
                percentageOfTheEntireCrown = 20,
                backgroundColor = "gray",
                fillColor = "yellow"
            },
               new RealTimeMap.SigmaDroneCrownScale()
            {
                label = "x 10 km/h",
                valueStart = 0,
                valueStop = 18,
                value = 6,
                percentageOfTheEntireCrown = 50,
                backgroundColor = "#f8f8ff"
            },
            new RealTimeMap.SigmaDroneCrownDiscrete()
            {
                label  = "fuel",
                colors = new List<string>() { "green", "yellow", "red" }.ToArray(),
                percentageValues = new List<int>() { 33, 33, 33 }.ToArray(),
                index=1,
                labels = new List<string>() { "full", "half", "low" }.ToArray(),
                percentageOfTheEntireCrown = 30,
                backgroundColor = "lightgray"
            },


        },
            wifiIndicator = new RealTimeMap.WiFiIndicator()
            {
                level = 1
            },
            altitudeIndicator = new RealTimeMap.AltitudeIndicator()
            {
                altitude = 822,
                maximumAltitude = 1200,

            }
        });
    }
    

    private async Task clearMap()
    {
        await rtm.Geometric.DisplayChartFromObject.clearAll();
    }

}