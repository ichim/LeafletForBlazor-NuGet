@page "/"

<button onclick="@clearChartFormMap">Clear chart from map</button>
<RealTimeMap @ref="rtm" Parameters="@loadParameters" height="calc(100vh - 4rem)" width="calc(100vw - 1.4rem)" OnAfterMapLoaded="@onAfterMapLoaded" />


@code {
    RealTimeMap rtm;
    RealTimeMap.LoadParameters loadParameters = new RealTimeMap.LoadParameters()
    {
        location = new RealTimeMap.Location()
        {
            latitude = 51.02094731770253,
            longitude = 4.523290395225346,
        },
        zoomLevel = 10
    };
    private async Task onAfterMapLoaded(RealTimeMap.MapEventArgs args)
    {
        List<RealTimeMap.DiscreteGaugeChartPoint> discretGaugePoints = new List<RealTimeMap.DiscreteGaugeChartPoint>();
        List<RealTimeMap.GaugeChartPoint> gaugePoints = new List<RealTimeMap.GaugeChartPoint>();
        List<RealTimeMap.PieChartPoint> pieChartPoints = new List<RealTimeMap.PieChartPoint>();
        List<RealTimeMap.QuarterGaugeChartPoint> quarterGaugeValue = new List<RealTimeMap.QuarterGaugeChartPoint>();

        discretGaugePoints.Add(new RealTimeMap.DiscreteGaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 50.81229753879652,
                longitude = 4.4274985764447905
            },
            colors = ["green", "yellow", "red", "darkgray"],
            percentageValues = [19, 18, 18, 30],
            labels = ["low", "midle", "high", "unknown"],
            label = "traffic",
            fontSize = 10,
            index = 1,
            turnedAround = false,
            heightCircularCrown = 18,
            dimension = 40,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 6,
                maxZoomLevel = 14
            }
        });
        discretGaugePoints.Add(new RealTimeMap.DiscreteGaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.215991945426374,
                longitude = 4.4133372736501375
            },
            colors = ["navy", "yellow", "darkgray"],
            percentageValues = [30, 30, 40],
            labels = ["rain", "clear", "unknown"],
            label = "wheather",
            fontSize = 10,
            index = 3,
            turnedAround = true,
            heightCircularCrown = 18,
            dimension = 40,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 6,
                maxZoomLevel = 14
            }
        });
        discretGaugePoints.Add(new RealTimeMap.DiscreteGaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.215991945426374,
                longitude = 4.4133372736501375
            },
            colors = ["red", "blue", "darkgray"],
            percentageValues = [25, 35, 40],
            labels = ["high", "normal", "unknown"],
            label = "traffic",
            fontSize = 10,
            index = 1,
            turnedAround = false,
            heightCircularCrown = 18,
            dimension = 40
        });

        discretGaugePoints.Add(new RealTimeMap.DiscreteGaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.14151715911828,
                longitude = 4.759054642005425
            },
            dimension = 60,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 10,
                maxZoomLevel = 14
            },
            colors = ["black", "blue", "darkgray"],
            percentageValues = [25, 35, 40],
            labels = ["high", "normal", "unknown"],
            label = "pollution",
            fontSize = 8,
            styles = new RealTimeMap.GaugeStyle()
            {
                lineIndicator = (new LeafletForBlazor.css.Style()).add("stroke", "red").add("stroke-width", "1.2").add("stroke-linecap", "square").add("opacity", "0.8"),
            },
            index = 1,
            turnedAround = true,
            heightCircularCrown = 18
         
        });

        quarterGaugeValue.Add(new RealTimeMap.QuarterGaugeChartPoint()
        {

            location = new RealTimeMap.Location()
            {
                latitude = 51.14151715911828,
                longitude = 4.759054642005425
            },
            dimension = 60,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 10,
                maxZoomLevel = 14
            },
            indexQuadrant = 2,
            valueStart = 0,
            valueStop = 80,
            value = 32,
            label = "rainfall",
            fill = "#4DBEEB",
            opacity = 0.4,
            fontSizeTextAndLabel = 6

        });

        quarterGaugeValue.Add(new RealTimeMap.QuarterGaugeChartPoint()
        {

            location = new RealTimeMap.Location()
            {
                latitude = 51.14151715911828,
                longitude = 4.759054642005425
            },
            dimension = 60,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 10,
                maxZoomLevel = 14
            },
            indexQuadrant = 3,
            valueStart = 0,
            valueStop = 35,
            value = 18,
            label = "temperature",
            opacity = 0.4,
            fontSizeTextAndLabel = 6

        });
        gaugePoints.Add(new RealTimeMap.GaugeChartPoint()
        {

            location = new RealTimeMap.Location()
            {
                latitude = 50.81229753879652,
                longitude = 4.4274985764447905
            },
            valueStart = 0,
            valueStop = 120,
            value = 86,
            label = "traff. wait.",
            colorStart = "red",
            colorStop = "yellow",
            fontColorStart = "black",
            fontColorMiddle = "white",
            fontColorStop = "yellow",
            heightCircularCrown = 18,
            dimension = 40,
            fontSize = 6,
            styles = new RealTimeMap.GaugeStyle()
            {
                panel = (new LeafletForBlazor.css.Style()).add("fill", "yellow").add("opacity", "0.5"),
                crown = (new LeafletForBlazor.css.Style()).add("stroke", "black").add("stroke-width", "0.4").add("opacity", "0.8"),
                gaugeValue = (new LeafletForBlazor.css.Style()).add("fill", "black"),
                gaugeLabel = (new LeafletForBlazor.css.Style()).add("fill", "black").add("font-size", "8"),
                lineIndicator = (new LeafletForBlazor.css.Style()).add("stroke", "indigo").add("stroke-width", "2").add("stroke-linecap", "square").add("opacity", "0.8"),
                shaft = (new LeafletForBlazor.css.Style()).add("r", "3").add("fill", "red")
            },
            turnedAround = true
        });


        gaugePoints.Add(new RealTimeMap.GaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.02094731770253,
                longitude = 4.523290395225346,
            },
            valueStart = 0,
            valueStop = 80,
            value = 20,
            label = "charging",
            colorStart = "#22FF00",
            colorStop = "#0D8000",
            heightCircularCrown = 18,
            styles = new RealTimeMap.GaugeStyle()
            {
                panel = (new LeafletForBlazor.css.Style()).add("stroke", "black").add("stroke-width", "2").add("fill", "#22FF00").add("opacity", "0.4"),
                crown = (new LeafletForBlazor.css.Style()).add("stroke", "white").add("stroke-width", "0").add("opacity", "0.6"),
                gaugeValue = (new LeafletForBlazor.css.Style()).add("fill", "black"),
                gaugeLabel = (new LeafletForBlazor.css.Style()).add("fill", "black").add("font-size", "8"),
                lineIndicator = (new LeafletForBlazor.css.Style()).add("stroke", "white").add("stroke-width", "2").add("stroke-linecap", "square").add("opacity", "0.8"),
                shaft = (new LeafletForBlazor.css.Style()).add("r", "3").add("fill", "white")
            },
            fontColorStart = "black",
            fontColorMiddle = "red",
            fontColorStop = "black",
            fontSize = 8,
            dimension = 32,
            
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 6,
                maxZoomLevel = 14
            },
            turnedAround = true
        });

        gaugePoints.Add(new RealTimeMap.GaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.02094731770253,
                longitude = 4.523290395225346,
            },
            valueStart = 0,
            valueStop = 120,
            value = 84,
            label = "parking",
            colorStart = "azure",
            colorStop = "navy",
            heightCircularCrown = 18,
            styles = new RealTimeMap.GaugeStyle()
            {
                panel = (new LeafletForBlazor.css.Style()).add("stroke", "black").add("stroke-width", "2").add("fill", "navy").add("opacity", "0.6"),
                crown = (new LeafletForBlazor.css.Style()).add("stroke", "white").add("stroke-width", "0").add("opacity", "0.6"),
                gaugeValue = (new LeafletForBlazor.css.Style()).add("fill", "white"),
                gaugeLabel = (new LeafletForBlazor.css.Style()).add("fill", "yellow").add("font-size", "8"),
                lineIndicator = (new LeafletForBlazor.css.Style()).add("stroke", "white").add("stroke-width", "2").add("stroke-linecap", "square").add("opacity", "0.8"),
                shaft = (new LeafletForBlazor.css.Style()).add("r", "3").add("fill", "white")
            },
            fontColorStart = "navy",
            fontColorMiddle = "yellow",
            fontColorStop = "yellow",
            fontSize = 8,
            dimension = 32,
         
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 6,
                maxZoomLevel = 14
            },
            turnedAround = false
        });

        pieChartPoints.Add(new RealTimeMap.PieChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 50.878884914917606,
                longitude = 4.700185924924764
            },
            values = (new List<double>() { 20, 65, 15 }).ToArray(),
            colors = (new List<string>() { "azure", "yellow", "#FF8C00" }).ToArray(),
            labels = (new List<string>() { "Fashion", "Entert.", "Food" }).ToArray(),
            expandedIndex = 0,
            fontSize = 9,
            dimension = 32,
            styles = new RealTimeMap.PieStyle
            {
                slice = (new LeafletForBlazor.css.Style()).add("stroke", "black").add("stroke-width", "0.5").add("opacity", "0.8"),
            },
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 10,
                maxZoomLevel = 14
            }
        });

        foreach (var item in discretGaugePoints)
            await args.sender.Geometric.DisplayChartFromObject.addChartPoint(item);

        foreach (var item in gaugePoints)
            await args.sender.Geometric.DisplayChartFromObject.addChartPoint(item);

        foreach (var item in pieChartPoints)
            await args.sender.Geometric.DisplayChartFromObject.addChartPoint(item);

        foreach (var item in quarterGaugeValue)
            await args.sender.Geometric.DisplayChartFromObject.addChartPoint(item);

    }
    private async Task clearChartFormMap()
    {
        await rtm.Geometric.DisplayChartFromObject.clearAll();
    }

}