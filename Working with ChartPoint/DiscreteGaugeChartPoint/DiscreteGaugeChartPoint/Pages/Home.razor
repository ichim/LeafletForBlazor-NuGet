@page "/"

<button onclick="@clearChartFormMap">Clear chart from map</button>
<RealTimeMap @ref="rtm" Parameters="@loadParameters" height="calc(100vh - 4rem)" width="calc(100vw - 1.4rem)" OnAfterMapLoaded="@onAfterMapLoaded" />


@code {
    RealTimeMap rtm;
    RealTimeMap.LoadParameters loadParameters = new RealTimeMap.LoadParameters()
    {
        location = new RealTimeMap.Location()
        {
            latitude = 51.02094731770253,
            longitude = 4.523290395225346,
        },
        zoomLevel = 10
    };
    private async Task onAfterMapLoaded(RealTimeMap.MapEventArgs args)
    {
        List<RealTimeMap.DiscreteGaugeChartPoint> gaugePoints = new List<RealTimeMap.DiscreteGaugeChartPoint>();


        gaugePoints.Add(new RealTimeMap.DiscreteGaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 50.81229753879652,
                longitude = 4.4274985764447905
            },
            colors = ["green", "yellow", "red", "darkgray"],
            percentageValues = [19, 18, 18, 30],
            labels = ["low", "midle", "high", "unknown"],
            label = "traffic",
            fontSize = 10,
            index = 1,
            turnedAround = false,
            heightCircularCrown = 18,
            dimension = 40,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 6,
                maxZoomLevel = 14
            }
        });
        gaugePoints.Add(new RealTimeMap.DiscreteGaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 50.81229753879652,
                longitude = 4.4274985764447905
            },
            colors = ["navy", "yellow", "darkgray"],
            percentageValues = [30, 30, 40],
            labels = ["rain", "clear", "unknown"],
            label = "wheather",
            fontSize = 10,
            index = 3,
            turnedAround = true,
            heightCircularCrown = 18,
            dimension = 40,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 6,
                maxZoomLevel = 14
            }
        });
        gaugePoints.Add(new RealTimeMap.DiscreteGaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.215991945426374,
                longitude = 4.4133372736501375
            },
            colors = ["black", "blue", "darkgray"],
            percentageValues = [25, 35, 40],
            labels = ["high", "normal", "unknown"],
            label = "pollution",
            fontSize = 10,
            index = 1,
            turnedAround = false,
            heightCircularCrown = 18,
            dimension = 40
        });
        gaugePoints.Add(new RealTimeMap.DiscreteGaugeChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.215991945426374,
                longitude = 4.4133372736501375
            },
            colors = ["navy", "yellow", "darkgray"],
            percentageValues = [30, 30, 40],
            labels = ["rain", "clear", "unknown"],
            label = "wheather",
            fontSize = 10,
            index = 3,
            turnedAround = true,
            heightCircularCrown = 18,
            dimension = 40,
        });
        foreach (var item in gaugePoints)
            await args.sender.Geometric.DisplayChartFromObject.addChartPoint(item);


    }
    private async Task clearChartFormMap()
    {
        await rtm.Geometric.DisplayChartFromObject.clearAll();
    }

}