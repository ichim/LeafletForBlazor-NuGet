@page "/"

<button onclick="@clearRealTimeMap">Clear Map</button>
<RealTimeMap @ref="rtm" Parameters="@loadParameters" height="calc(100vh - 8rem)" width="calc(100vw - 18rem)" OnAfterMapLoaded="@onAfterMapLoaded" />


@code {
    RealTimeMap rtm;
    RealTimeMap.LoadParameters loadParameters = new RealTimeMap.LoadParameters()
    {
        location = new RealTimeMap.Location()
        {
            latitude = 51.02094731770253,
            longitude = 4.523290395225346,
        },
        zoomLevel = 10
    };
    private async Task onAfterMapLoaded(RealTimeMap.MapEventArgs args)
    {
        List<RealTimeMap.PieChartPoint> pieChartPoints = new List<RealTimeMap.PieChartPoint>();
        pieChartPoints.Add(new RealTimeMap.PieChartPoint()
            {
                location = new RealTimeMap.Location()
                {
                    latitude = 50.85073773727975,
                    longitude = 4.357868777032773
                },
                values = (new List<double>() { 20, 45, 15, 20 }).ToArray(),
                colors = (new List<string>() { "#32cd32", "#ffe4c4", "#dda0dd", "pink" }).ToArray(),
                labels = (new List<string>() { "Scooter", "Bicycle", "Vehicle", "Pedest" }).ToArray(),
                expandedIndex = 0,
                fontSize = 10,
                dimension = 40,
                visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
                {
                    minZoomLevel = 8,
                    maxZoomLevel = 14
                }
            });

        pieChartPoints.Add(new RealTimeMap.PieChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 50.878884914917606,
                longitude = 4.700185924924764
            },
            values = (new List<double>() { 20, 65, 15 }).ToArray(),
            colors = (new List<string>() { "azure", "yellow", "#FF8C00" }).ToArray(),
            labels = (new List<string>() { "Fashion", "Entert.", "Food" }).ToArray(),
            expandedIndex = 0,
            fontSize = 9,
            dimension = 30,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 8,
                maxZoomLevel = 14
            }
        });
        pieChartPoints.Add(new RealTimeMap.PieChartPoint()
            {
                location = new RealTimeMap.Location()
                {
                    latitude = 51.02785015312669,
                    longitude = 4.4787052530511895
                },
                values = (new List<double>() { 15, 55, 15, 15 }).ToArray(),
                colors = (new List<string>() { "#ADFF2F", "#ADD8E6", "#FF8C00", "#FF00FF" }).ToArray(),
                labels = (new List<string>() { "cheese", "sausag.", "pretzel", "cacke" }).ToArray(),
                expandedIndex = 2,
                fontSize = 10,
                dimension = 30,
                visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
                {
                    minZoomLevel = 8,
                    maxZoomLevel = 14
                }
            });

        pieChartPoints.Add(new RealTimeMap.PieChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.10290763552592,
                longitude = 3.9819789339909764
            },
            values = (new List<double>() { 30, 55, 15 }).ToArray(),
            colors = (new List<string>() { "#ADFF2F", "#00FFFF", "#FF8C00" }).ToArray(),
            labels = (new List<string>() { "music", "history", "tradit." }).ToArray(),
            expandedIndex = 2,
            fontSize = 10,
            dimension = 38,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 8,
                maxZoomLevel = 14
            }
        });

        pieChartPoints.Add(new RealTimeMap.PieChartPoint()
            {
                location = new RealTimeMap.Location()
                {
                    latitude = 51.168725675723984,
                    longitude = 4.903901921787614
                },
                values = (new List<double>() { 20, 25, 15, 18, 10, 22 }).ToArray(),
                colors = (new List<string>() { "#ADFF2F", "#00FFFF", "#FFA500", "azure", "yellow", "#FF8C00" }).ToArray(),
                labels = (new List<string>() { "music", "history", "tradit.", "Fashion", "Entert.", "Food" }).ToArray(),
                expandedIndex = 4,
                fontSize = 10,
                dimension = 50,
                visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
                {
                    minZoomLevel = 8,
                    maxZoomLevel = 14
                }
            });

        pieChartPoints.Add(new RealTimeMap.PieChartPoint()
        {
            location = new RealTimeMap.Location()
            {
                latitude = 51.215639249505294,
                longitude = 4.4257336791909,
            },
            values = (new List<double>() { 20, 10, 15, 55 }).ToArray(),
            colors = (new List<string>() { "#ADFF2F", "#00FFFF", "#FFA500", "azure" }).ToArray(),
            labels = (new List<string>() { "parks", "streets", "housing", "museums" }).ToArray(),
            //without expandedIndex
            fontSize = 6,
            dimension = 54,
            visibilityZoomLevel = new RealTimeMap.VisibilityZoomLevel()
            {
                minZoomLevel = 8,
                maxZoomLevel = 14
            }
        });
       

        foreach (var pieChartPoint in pieChartPoints)
            await args.sender.Geometric.DisplayChartFromObject.addPieChartPoint(pieChartPoint);
       
    }
    private async Task clearRealTimeMap()
    {
        await rtm.Geometric.DisplayChartFromObject.clearAll();
    }

}